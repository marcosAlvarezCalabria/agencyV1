---
import TourCard from './TourCard.astro';
const { tours, t, lang = 'es' } = Astro.props;
---
<div class="w-full flex justify-center z-50 relative mb-8">
  <input id="tour-search-input" type="text" placeholder="ðŸ” Buscar tour por nombre o destino..." class="w-full max-w-md px-4 py-3 rounded-xl border-4 border-[#d2a530] bg-white text-black font-semibold focus:outline-none focus:ring-2 focus:ring-[#d2a530] text-lg shadow-lg" style="z-index:999; box-shadow:0 4px 24px 0 #d2a53033;" />
</div>
<div id="tour-search-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
  {tours.map((tour) => (
    <TourCard tour={tour} t={t} lang={lang} />
  ))}
</div>

<script is:inline>
if (typeof window !== 'undefined') {
  window.addEventListener('DOMContentLoaded', () => {
    const input = document.getElementById('tour-search-input');
    const results = document.getElementById('tour-search-results');
    if (input && results) {
      input.addEventListener('input', (e) => {
        const value = e.target.value.toLowerCase();
        results.querySelectorAll('.tour-card-desktop').forEach(card => {
          const name = card.getAttribute('data-name')?.toLowerCase() || '';
          const desc = card.getAttribute('data-description')?.toLowerCase() || '';
          if (name.includes(value) || desc.includes(value)) {
            card.style.display = '';
          } else {
            card.style.display = 'none';
          }
        });
      });
    }
  });
}
</script>

---
import 'swiper/css';
import 'swiper/css/thumbs';

const { tours } = Astro.props;
const initial = 1; // El segundo slide (índice 1)
---

<!-- Carousel principal -->
<div class="swiper main-swiper mb-6">
  <div class="swiper-wrapper">
    {tours.map(tour => (
      <div class="swiper-slide">
        <img src={tour.image} alt={tour.name} class="w-full h-64 object-cover rounded-xl mb-2" />
        <h3 class="text-xl font-bold text-center">{tour.name}</h3>
        <p class="text-center text-gray-500 text-sm">{tour.duration}</p>
      </div>
    ))}
  </div>
</div>

<!-- Carousel de thumbnails (debe ir antes para obtener la instancia) -->
<div class="swiper thumbs-swiper mb-4">
  <div class="swiper-wrapper">
    {tours.map(tour => (
      <div class="swiper-slide">
        <div class="p-2 bg-white rounded shadow text-center text-xs font-semibold thumb-content">
          {tour.name}
        </div>
      </div>
    ))}
  </div>
</div>

<style>
  .main-swiper .swiper-slide {
    transition: all 0.3s;
  }
  .swiper-slide-thumb-active .thumb-content {
    background: #f59e42;
    color: #fff;
    box-shadow: 0 0 0 2px #f59e42;
  }
</style>

<script>
  import Swiper from 'swiper';
  import { Thumbs, Navigation } from 'swiper/modules';

  Swiper.use([Thumbs, Navigation]);

  let thumbsSwiper;
  thumbsSwiper = new Swiper('.thumbs-swiper', {
    slidesPerView: 4,
    spaceBetween: 10,
    watchSlidesProgress: true,
    navigation: false,
    initialSlide: 1, // Mostrar el segundo slide al cargar
  });

  new Swiper('.main-swiper', {
    slidesPerView: 1,
    centeredSlides: true,
    spaceBetween: 0,
    initialSlide: 1, // Mostrar el segundo slide al cargar
    breakpoints: {
      1024: {
        slidesPerView: 3,
        centeredSlides: true,
        spaceBetween: 48,
        initialSlide: 1, // Asegura el segundo slide en desktop también
      }
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    thumbs: {
      swiper: thumbsSwiper,
    },
  });
</script>